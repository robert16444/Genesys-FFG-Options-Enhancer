<form class="grr-form">
  <h3>Online Players</h3>
  <div class="grr-userlist">
    {{#each onlineUsers}}
      <div class="grr-user {{#unless hasActor}}grr-disabled{{/unless}}" data-user-id="{{id}}" data-actor-id="{{actorId}}">
        <img class="grr-avatar" src="{{actorImg}}" />
        <div class="grr-userinfo">
          <div class="grr-username">{{name}}</div>
          <div class="grr-actorname">{{actorName}}</div>
        </div>
      </div>
    {{/each}}
    {{#unless onlineUsers.length}}
      <p class="grr-muted">No online players.</p>
    {{/unless}}
  </div>

  <hr/>

  <div class="grr-field">
    <label>Label (shown to players)</label>
    <input type="text" name="label" placeholder="e.g. Perception check at the door" />
  </div>

  <div class="grr-field">
    <label>Skill</label>
    <div class="grr-row">
      <select name="skillKey">
        <option value="">(select player(s) first)</option>
      </select>
      <button type="button" name="refreshSkills" class="grr-btn">↻</button>
    </div>
    <p class="grr-muted">Select one or more players above first. Skills are read from the first selected character.</p>
  </div>

  <div class="grr-grid4">
    <div class="grr-field">
      <label>Difficulty (purple)</label>
      <input type="number" name="difficulty" value="0" min="0" step="1" />
    </div>
    <div class="grr-field">
      <label>Challenge upgrades (red)</label>
      <input type="number" name="challenge" value="0" min="0" step="1" />
      <p class="grr-muted">Upgrades difficulty (purple→red). If no purple, adds purple first (system rules).</p>
    </div>
    <div class="grr-field">
      <label>Setback (black)</label>
      <input type="number" name="setback" value="0" min="0" step="1" />
    </div>
    <div class="grr-field">
      <label>Boost (blue)</label>
      <input type="number" name="boost" value="0" min="0" step="1" />
    </div>
  </div>

  <div class="grr-field">
    <label>Roll mode</label>
    <select name="rollMode">
      {{#each rollModes}}
        <option value="{{id}}">{{label}}</option>
      {{/each}}
    </select>
  </div>

  <div class="grr-actions">
    <button type="button" name="send" class="grr-primary"><i class="fas fa-paper-plane"></i> Send Request</button>
  </div>
</form>
